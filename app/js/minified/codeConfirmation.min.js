const codeConfirmation=document.querySelector(".code-confirmation"),codeConfirmationForm=document.querySelector(".code-confirmation-form"),codeConfirmationFormInputs=document.querySelectorAll(".code-confirmation-form__input"),resendCodeBtn=document.querySelector("#resend-code");let resendTimeout;const resendCodeRender=()=>{resendCodeBtn.classList.add("link--disabled"),toggleProgressBar({visible:!0,selector:"#resend-code .circular-progress",speed:300,color:"#222"}),resendTimeout=setTimeout(()=>{resendCodeBtn.classList.remove("link--disabled")},3e4)},getCode=()=>Array.from(codeConfirmationFormInputs).reduce((e,o)=>e+o?.value,""),linkEnterAnotherPhone=(codeConfirmationFormInputs.forEach((e,t)=>e.addEventListener("input",e=>{let o=e.target.value;o=o.replace(/\D/g,""),e.target.value=o,1<e.target.value.length&&(e.target.value=e.target.value.slice(0,1)),codeConfirmationFormInputs.forEach(e=>e.classList.toggle("input--correct",4===getCode().length)),1===e.target.value.length&&codeConfirmationFormInputs[t+1]?.focus()})),codeConfirmationFormInputs[0].focus(),document.querySelector("#link-enter-another-phone"));linkEnterAnotherPhone.addEventListener("click",e=>{e.preventDefault(),window.location.href="index.html"}),codeConfirmationForm.addEventListener("submit",async e=>{e.preventDefault(),4===getCode().length&&await checkingCorrectCode(+getCode())?window.location.href="access-allowed.html":toggleAuthError(!0,"Вероятно, в коде ошибка, повторите ввод")}),resendCodeBtn.addEventListener("click",e=>{e.preventDefault(),resendCodeBtn.classList.contains("link--disabled")||resendCodeRender()});